{"version":3,"sources":["webpack:///./src/common/zhao/index.less?4e86","common/zhao/index.less","common/zhao/index.js"],"names":["content","module","i","options","locals","exports","push","Step","Steps","index","connect","state","isLogin","get","re","yan","dispatch","chaPhone","phone","getPhoneRe","chaPhoneRe","data","getPhoneResult","fayanzhengma","getPhoneValue","yanCode","code","getYanCode","getRegister","obj","getUserInfo","props","handleSubmit","e","preventDefault","form","validateFields","err","values","gai","tel","DemoClickYan","event","setState","target","value","length","nextSetup","current","handlerClickPhone","test","pan","rules","callback","loginpass","this","getFieldValue","Error","getFieldDecorator","steps","title","className","key","type","placeholder","maxLength","onChange","disabled","onClick","onSubmit","Item","required","message","pattern","Password","prefix","style","color","validator","handleCfmPwd","htmlType","to","map","item","Component","Form","create","name"],"mappings":"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","file":"static/js/5.bd941a41.chunk.js","sourcesContent":["var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js!./index.less\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".content_neirong {\\n  margin: 0 auto;\\n  padding: 10px 0;\\n  width: 1190px;\\n  overflow: hidden;\\n  padding-top: 50px;\\n}\\n.content_neirong .headline-content {\\n  display: inline-block;\\n  padding: 12px 0;\\n  margin-bottom: -2px;\\n  color: #333;\\n  font-size: 18px;\\n  text-align: left;\\n}\\n.geren .header--mini {\\n  min-width: 1190px;\\n}\\n.geren .header--mini .wrapper {\\n  width: 1190px;\\n  padding: 20px 0;\\n}\\n.steps-content {\\n  border: 1px solid #ddd;\\n  padding: 67px 0 58px;\\n  background: #fff;\\n  margin-bottom: 60px;\\n  height: 330px;\\n  box-sizing: border-box;\\n  font-size: 16px;\\n}\\n.steps-content > div {\\n  width: 300px;\\n  margin: 0 auto;\\n}\\n.ant-steps {\\n  padding: 20px 0;\\n}\\n.step-1-title {\\n  font-size: 16px;\\n  color: #333;\\n  margin-bottom: 50px;\\n}\\n.step-1-op .next-step-btn {\\n  font-size: 16px;\\n  border-radius: 8px;\\n  text-align: center;\\n  height: 36px;\\n  line-height: 36px;\\n  width: 300px;\\n  display: inline-block;\\n  border: none;\\n}\\n.step-1-op .user-input {\\n  font-size: 16px;\\n  border: none;\\n  border-bottom: 1px solid #d8d8d8;\\n  width: 300px;\\n  box-sizing: border-box;\\n  margin-bottom: 30px;\\n  background-color: #fff;\\n}\\n\", \"\"]);\n","import React, { Component, Fragment } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { Form, Steps, Button, Input, Icon } from \"antd\";\r\nimport {\r\n  getPhoneRe,\r\n  getPhoneResult,\r\n  getPhoneValue,\r\n  getYanCode,\r\n  getUserInfo\r\n} from \"../store/createAction\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./index.less\";\r\n\r\nconst { Step } = Steps;\r\n\r\n@connect(\r\n  state => {\r\n    return {\r\n      isLogin: state.get(\"Header\").get(\"isLogin\"),\r\n      re: state.get(\"Header\").get(\"re\"),\r\n      yan: state.get(\"Header\").get(\"yan\")\r\n    };\r\n  },\r\n  dispatch => {\r\n    return {\r\n      chaPhone(phone) {\r\n        dispatch(getPhoneRe(phone));\r\n      },\r\n      chaPhoneRe(data) {\r\n        dispatch(getPhoneResult(data));\r\n      },\r\n      fayanzhengma(data) {\r\n        dispatch(getPhoneValue(data));\r\n      },\r\n      yanCode(code) {\r\n        dispatch(getYanCode(code));\r\n      },\r\n      getRegister(obj) {\r\n        dispatch(getUserInfo(obj));\r\n      }\r\n    };\r\n  }\r\n)\r\nclass index extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      current: 0,\r\n      tel: \"\",\r\n      pan: true,\r\n      yanCode: \"\"\r\n    };\r\n  }\r\n\r\n  //确认密码校验一致\r\n  handleCfmPwd(rules, value, callback) {\r\n    let loginpass = this.props.form.getFieldValue(\"password\");\r\n    if (loginpass && loginpass !== value) {\r\n      callback(new Error(\"两次密码输入不一致\"));\r\n    } else {\r\n      callback();\r\n    }\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        values.code = this.state.yanCode;\r\n        values.gai = 1;\r\n        values.tel = this.state.tel;\r\n        this.props.getRegister(values);\r\n      }\r\n    });\r\n  };\r\n\r\n  DemoClickYan = event => {\r\n    this.setState({\r\n      yanCode: event.target.value\r\n    });\r\n    if (event.target.value.length === 6) {\r\n      this.props.yanCode(event.target.value);\r\n    }\r\n  };\r\n\r\n  nextSetup = () => {\r\n    // 如果是第二次,进行验证\r\n    if (this.state.current === 1) {\r\n    }\r\n    this.setState({\r\n      current: this.state.current + 1\r\n    });\r\n  };\r\n\r\n  handlerClickPhone = event => {\r\n    if (/^1[3456789]\\d{9}$/.test(event.target.value)) {\r\n      this.props.chaPhone(event.target.value);\r\n      this.setState({\r\n        tel: event.target.value\r\n      });\r\n    } else {\r\n      this.props.chaPhoneRe(false);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { current, tel, pan } = this.state;\r\n    const { isLogin, re, fayanzhengma, yan } = this.props;\r\n    if (current === 1 && pan) {\r\n      fayanzhengma(tel);\r\n      this.setState({\r\n        pan: false\r\n      });\r\n    }\r\n    const steps = [\r\n      {\r\n        title: \"确认账号\",\r\n        content: (\r\n          <div className=\"step-1-op\" key={0}>\r\n            <div className=\"step-1-title\">请填写你要找回密码的美团账号</div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"user-input\"\r\n              placeholder=\"手机号/用户名/邮箱\"\r\n              maxLength=\"32\"\r\n              onChange={this.handlerClickPhone}\r\n            ></input>\r\n            <Button\r\n              type=\"primary\"\r\n              disabled={!re}\r\n              className=\"next-step-btn\"\r\n              onClick={this.nextSetup}\r\n            >\r\n              下一步\r\n            </Button>\r\n          </div>\r\n        )\r\n      },\r\n      {\r\n        title: \"安全校验\",\r\n        content: (\r\n          <div className=\"step-1-op\" key={1}>\r\n            <div className=\"step-1-title\">我们已经给您发送验证码,请填写</div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"user-input\"\r\n              placeholder=\"6位验证码\"\r\n              maxLength=\"32\"\r\n              onChange={this.DemoClickYan}\r\n            ></input>\r\n            <Button\r\n              type=\"primary\"\r\n              disabled={!yan}\r\n              className=\"next-step-btn\"\r\n              onClick={this.nextSetup}\r\n            >\r\n              下一步\r\n            </Button>\r\n          </div>\r\n        )\r\n      },\r\n      {\r\n        title: \"设置密码\",\r\n        content: (\r\n          <div className=\"step-1-op\" key={2}>\r\n            <div className=\"step-1-title\">请填写新密码</div>\r\n            <Form onSubmit={this.handleSubmit}>\r\n              <Form.Item>\r\n                {getFieldDecorator(\"password\", {\r\n                  rules: [\r\n                    { required: true, message: \"请输入密码\" },\r\n                    {\r\n                      // eslint-disable-next-line no-useless-escape\r\n                      pattern: /^.*(?=.{8,16})(?=.*\\d)(?=.*[a-z|A-Z]{1,})(?=.*[!@#\\$%\\^&\\*\\?\\(\\),\\.;:'\"<>\\{\\}\\[\\]\\\\/\\+-=\\|_]).*$/,\r\n                      message: \"密码长度为8-16,必须有字母,特殊字符,数字\"\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Input.Password\r\n                    prefix={\r\n                      <Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />\r\n                    }\r\n                    type=\"password\"\r\n                    placeholder=\"请输入新密码\"\r\n                  />\r\n                )}\r\n              </Form.Item>\r\n              <Form.Item>\r\n                {getFieldDecorator(\"rePassword\", {\r\n                  rules: [\r\n                    { required: true, message: \"请在此输入一遍密码\" },\r\n                    {\r\n                      validator: (rules, value, callback) => {\r\n                        this.handleCfmPwd(rules, value, callback);\r\n                      }\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Input.Password\r\n                    prefix={\r\n                      <Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />\r\n                    }\r\n                    type=\"password\"\r\n                    placeholder=\"再次输入密码\"\r\n                  />\r\n                )}\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Button\r\n                  type=\"primary\"\r\n                  className=\"next-step-btn\"\r\n                  htmlType=\"submit\"\r\n                >\r\n                  下一步\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>\r\n          </div>\r\n        )\r\n      }\r\n    ];\r\n\r\n    return (\r\n      <Fragment>\r\n        {isLogin ? <Redirect to=\"/\" /> : null}\r\n        <div className=\"pg-unitive-signup geren\">\r\n          <header className=\"header--mini\">\r\n            <div className=\"wrapper cf\">\r\n              <Link to=\"/\" className=\"site-logo\">\r\n                美团\r\n              </Link>\r\n              <div className=\"login-block\">\r\n                <span className=\"tip\">已有美团账号？</span>\r\n                <Link to=\"/login\" className=\"btn btn-small login\">\r\n                  登录\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </header>\r\n          <div className=\"content_neirong\">\r\n            <h3 className=\"headline-content\">找回登录密码</h3>\r\n            <Steps current={current}>\r\n              {steps.map(item => (\r\n                <Step key={item.title} title={item.title} />\r\n              ))}\r\n            </Steps>\r\n            <div className=\"steps-content\">{steps[current].content}</div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create({ name: \"zhao\" })(index);\r\n"],"sourceRoot":""}